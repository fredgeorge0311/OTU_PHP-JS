<?xml version="1.0" ?>

<container xmlns="http://symfony.com/schema/dic/services"
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:schemaLocation="http://symfony.com/schema/dic/services http://symfony.com/schema/dic/services/services-1.0.xsd">

    <services>

        <service id="shopware_customer_search.customer_search" class="Shopware\Bundle\CustomerSearchBundle\CustomerSearch">
            <argument type="service" id="shopware_customer_search.customer_number_search" />
            <argument type="service" id="dbal_connection" />
        </service>
        <service id="shopware_customer_search.customer_number_search" class="Shopware\Bundle\CustomerSearchBundle\CustomerNumberSearch">
            <argument type="service" id="shopware_customer_search.handler_registry"/>
            <argument type="service" id="dbal_connection"/>
        </service>

        <service id="shopware_customer_search.handler_registry" class="Shopware\Bundle\CustomerSearchBundle\HandlerRegistry">
            <argument type="collection"/>
        </service>

        <service id="shopware_customer_search.has_address_with_country_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\HasAddressWithCountryConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.has_canceled_orders_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\HasCanceledOrdersConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.has_order_count_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\HasOrderCountConditionHandler">
            <argument type="service" id="shopware_customer_search.aggregated_order_table" />
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.has_total_order_amount_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\HasTotalOrderAmountConditionHandler">
            <argument type="service" id="shopware_customer_search.aggregated_order_table" />
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.is_customer_since_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\IsCustomerSinceConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.is_in_customer_group_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\IsInCustomerGroupConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_at_weekday_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedAtWeekdayConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_in_last_days_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedInLastDaysConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_in_shop_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedInShopConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_on_device_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedOnDeviceConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_product_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedProductConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_product_of_category_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedProductOfCategoryConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_product_of_manufacturer_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedProductOfManufacturerConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_with_delivery_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedWithDeliveryConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.ordered_with_payment_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\OrderedWithPaymentConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.registered_in_shop_condition_handler" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\RegisteredInShopConditionHandler">
            <tag name="customer_search_condition_handler"/>
        </service>

        <service id="shopware_customer_search.stream_indexer" class="Shopware\Bundle\CustomerSearchBundle\CustomerStream\StreamIndexer">
            <argument type="service" id="shopware_customer_search.stream_criteria_factory" />
            <argument type="service" id="shopware_customer_search.customer_number_search" />
            <argument type="service" id="dbal_connection" />
        </service>

        <service id="shopware_customer_search.stream_criteria_factory" class="Shopware\Bundle\CustomerSearchBundle\CustomerStream\CustomerStreamCriteriaFactory">
            <argument type="service" id="dbal_connection" />
        </service>

        <service id="shopware_customer_search.aggregated_order_table" class="Shopware\Bundle\CustomerSearchBundle\ConditionHandler\Common\AggregatedOrderTable">
            <argument type="service" id="dbal_connection" />
        </service>

        <service id="shopware_customer_search.index_populate_command" class="Shopware\Bundle\CustomerSearchBundle\Commands\IndexPopulateCommand">
            <tag name="console.command" />
        </service>
    </services>
</container>
